---
/**
 * Comprehensive SEO Component - Single Source of Truth
 * Controls all SEO elements from one centralized location
 * 
 * Usage:
 * <SEOComplete
 *   title="Page Title"
 *   description="Page description"
 *   keywords={['keyword1', 'keyword2']}
 *   schema={schemaObject}
 *   ogImage="/path/to/image.jpg"
 * />
 */

interface Props {
  // Required
  title: string;
  description: string;
  
  // Optional - Meta
  keywords?: string[];
  author?: string;
  robots?: string;
  
  // Optional - Open Graph
  ogType?: 'website' | 'article' | 'product';
  ogImage?: string;
  ogImageWidth?: number;
  ogImageHeight?: number;
  
  // Optional - Twitter
  twitterCard?: 'summary' | 'summary_large_image' | 'app' | 'player';
  twitterSite?: string;
  twitterCreator?: string;
  
  // Optional - URLs
  canonicalURL?: string;
  
  // Optional - Schema.org
  schema?: object | object[];
  
  // Optional - Article specific
  article?: {
    publishedTime?: string;
    modifiedTime?: string;
    author?: string;
    section?: string;
    tags?: string[];
  };
  
  // Optional - Language
  lang?: string;
  locale?: string;
}

const {
  // Required
  title,
  description,
  
  // Meta defaults
  keywords = [],
  author = 'Maxwin580',
  robots = 'index, follow',
  
  // OG defaults
  ogType = 'website',
  ogImage = '/assets/images/og-default.jpg',
  ogImageWidth = 1200,
  ogImageHeight = 630,
  
  // Twitter defaults
  twitterCard = 'summary_large_image',
  twitterSite = '@maxwin580',
  twitterCreator = '@maxwin580',
  
  // URL
  canonicalURL = Astro.url.pathname,
  
  // Schema
  schema,
  
  // Article
  article,
  
  // Language
  lang = 'tr',
  locale = 'tr_TR',
} = Astro.props;

// Site configuration
const SITE_NAME = 'Maxwin580';
const SITE_URL = 'https://maxwin580.com';

// Generate full URLs
const fullCanonicalURL = new URL(canonicalURL, SITE_URL).href;
const fullOgImage = new URL(ogImage, SITE_URL).href;

// Generate page title with site name
const fullTitle = title.includes(SITE_NAME) ? title : `${title} - ${SITE_NAME}`;
---

<!-- Primary Meta Tags -->
<title>{fullTitle}</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta name="title" content={fullTitle} />
<meta name="description" content={description} />
{keywords.length > 0 && <meta name="keywords" content={keywords.join(', ')} />}
<meta name="author" content={author} />
<meta name="robots" content={robots} />
<meta name="language" content={lang} />

<!-- Canonical URL -->
<link rel="canonical" href={fullCanonicalURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={ogType} />
<meta property="og:url" content={fullCanonicalURL} />
<meta property="og:title" content={fullTitle} />
<meta property="og:description" content={description} />
<meta property="og:image" content={fullOgImage} />
<meta property="og:image:width" content={String(ogImageWidth)} />
<meta property="og:image:height" content={String(ogImageHeight)} />
<meta property="og:site_name" content={SITE_NAME} />
<meta property="og:locale" content={locale} />

{article && (
  <>
    {article.publishedTime && <meta property="article:published_time" content={article.publishedTime} />}
    {article.modifiedTime && <meta property="article:modified_time" content={article.modifiedTime} />}
    {article.author && <meta property="article:author" content={article.author} />}
    {article.section && <meta property="article:section" content={article.section} />}
    {article.tags && article.tags.map(tag => <meta property="article:tag" content={tag} />)}
  </>
)}

<!-- Twitter Card -->
<meta name="twitter:card" content={twitterCard} />
<meta name="twitter:url" content={fullCanonicalURL} />
<meta name="twitter:title" content={fullTitle} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={fullOgImage} />
{twitterSite && <meta name="twitter:site" content={twitterSite} />}
{twitterCreator && <meta name="twitter:creator" content={twitterCreator} />}

<!-- Additional Meta -->
<meta name="theme-color" content="#1a1a1a" />
<meta name="format-detection" content="telephone=no" />

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png" />

<!-- Schema.org JSON-LD -->
{schema && (
  Array.isArray(schema) ? (
    schema.map((s) => (
      <script type="application/ld+json" set:html={JSON.stringify(s)} />
    ))
  ) : (
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  )
)}

<!-- Preconnect for performance -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
